# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ/–Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## –£—Å–ª–æ–≤–Ω—ã–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç
- ‚ùå –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç
- ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç
- üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## 1. –¶–µ–ª—å

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å Tick ‚Üí —Ä–µ—à–µ–Ω–∏–µ ‚âà –¥–æ 1 ms | ‚ö†Ô∏è | –ï—Å—Ç—å –º–µ—Ç—Ä–∏–∫–∏ `last_scan_duration_ms` –≤ `market_engine.py:62-65`, –Ω–æ –Ω–µ—Ç —è–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ä–æ–≥–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è runtime —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ 30 –ø–∞—Ä –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ | ‚úÖ | `config.py:96` - `MAX_MONITORED_PAIRS = 30` |
| –ê—Ä–±–∏—Ç—Ä–∞–∂ 2 –±–∏—Ä–∂–∏ –Ω–∞ –æ–¥–Ω—É –ø–∞—Ä—É | ‚úÖ | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ `market_engine.py` |
| –†–µ–∂–∏–º –ø–æ–∑–∏—Ü–∏–π one-way | ‚ùå | **BUG:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ! –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏/—É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–∂–∏–º–∞ –ø–æ–∑–∏—Ü–∏–π –Ω–∞ –±–∏—Ä–∂–∞—Ö. –ï—Å–ª–∏ –Ω–∞ –±–∏—Ä–∂–µ hedge mode ‚Äî –ª–æ–≥–∏–∫–∞ —Å–ª–æ–º–∞–µ—Ç—Å—è |

---

## 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 2.1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –¢–æ–ª—å–∫–æ WebSocket (–±–µ–∑ REST polling) | ‚úÖ | `ws_manager.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ WebSocket –¥–ª—è —Ü–µ–Ω |
| Best bid / best ask | ‚úÖ | –•—Ä–∞–Ω—è—Ç—Å—è –≤ —Å—Ç–∞–∫–∞–Ω–∞—Ö `bids[0]` / `asks[0]` |
| Orderbook –¥–æ 10 —É—Ä–æ–≤–Ω–µ–π | ‚ùå | **BUG:** `ws_manager.py:74` - `RETURN_BOOK_DEPTH = 5`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ 5 —É—Ä–æ–≤–Ω–µ–π –≤–º–µ—Å—Ç–æ 10! |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞: Bybit, Bitget, BingX, Gate.io, OKX, HTX | ‚ö†Ô∏è | –í—Å–µ 6 –±–∏—Ä–∂ –µ—Å—Ç—å + MEXC (–Ω–µ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö). `config.py:14-22` |
| –û–¥–Ω–æ –ø—É–±–ª–∏—á–Ω–æ–µ WS-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ –±–∏—Ä–∂—É | ‚úÖ | `ws_manager.py:180` - –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ –±–∏—Ä–∂—É |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect —Å backoff | ‚ö†Ô∏è | **BUG:** Backoff –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3, 4.5, 6.75... —Å–µ–∫ (base=3, mult=1.5), –∞ –Ω–µ 2, 4, 8, 16, 32 –∫–∞–∫ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö. `ws_manager.py:69-71` |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö | ‚úÖ | `safe_levels()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç qty > 0, price, —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö |

### 2.2. –¢–∏–ø—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –¢–æ–ª—å–∫–æ USDT-–ø–µ—Ä–ø–µ—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—å—é—á–µ—Ä—Å—ã | ‚úÖ | `config.py:99` - `DEFAULT_MARKET_TYPE = "swap"` |
| –†–∞—Å—á—ë—Ç—ã –≤ USDT | ‚úÖ | –í—Å–µ PnL, —Å–ø—Ä–µ–¥—ã, –∫–æ–º–∏—Å—Å–∏–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –≤ USDT |

### 2.3. –†–∞—Å—á—ë—Ç —Å–ø—Ä–µ–¥–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø–æ 10 —É—Ä–æ–≤–Ω—è–º asks/bids | ‚ùå | **BUG:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 5 —É—Ä–æ–≤–Ω–µ–π (—Å–º. –ø.2.1). `market_engine.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç max 5 |
| –ó–∞–ø—Ä–µ—Ç –≤—Ö–æ–¥–∞ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –æ–±—ä—ë–º–∞ | ‚úÖ | `market_engine.py:198` - `min_fill_ratio = 0.98`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ |
| –£—á—ë—Ç –∫–æ–º–∏—Å—Å–∏–π (4x taker fee) | ‚úÖ | `market_engine.py:339` - `full_cycle_fees = entry_fees * 2` (–≤—Ö–æ–¥ + –≤—ã—Ö–æ–¥ = 4 –∫–æ–º–∏—Å—Å–∏–∏) |
| Net_spread = Spread - Total_fees | ‚úÖ | `market_engine.py:342` - `net_full = raw_spread_pct - full_cycle_fees` |

### 2.4. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞—Ä—ã

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| PairConfig —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | ‚úÖ | `database.py:114-131` - –≤—Å–µ –ø–æ–ª—è –µ—Å—Ç—å: symbol, volume, entry_spread, exit_spread, n_orders, stop_loss |
| –°—Ç–∞—Ç—É—Å—ã: PAUSED, READY, ENTERING, POSITION_OPEN, EXITING, ERROR | ‚ö†Ô∏è | **MISMATCH:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥—Ä—É–≥–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è: `paused`/`active` –≤ –ë–î, `ENTERING`/`EXITING`/`HOLD` –¥–ª—è –ø–æ–∑–∏—Ü–∏–π. –ù–µ—Ç —è–≤–Ω–æ–≥–æ `ERROR` —Å—Ç–∞—Ç—É—Å–∞. `db_manager.py:676-681` |

### 2.5. –û—Ä–¥–µ—Ä–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –¢–æ–ª—å–∫–æ market –æ—Ä–¥–µ—Ä–∞ | ‚úÖ | `exchange_manager.py:574` - `type="market"` |
| reduceOnly –¥–ª—è –≤—ã—Ö–æ–¥–∞ | ‚úÖ | `trade_engine.py:474, 1024, 1033` - `reduceOnly: True` –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π |

### 2.6. –ê–ª–≥–æ—Ä–∏—Ç–º –≤—Ö–æ–¥–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –ü—Ä–æ–≤–µ—Ä–∫–∞ Net_spread >= EntrySpread | ‚úÖ | `main.py:868` - `if net_spread < state.entry_spread` |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ | ‚úÖ | `market_engine.py:238-243` - VWAP –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞/–º–∞—Ä–∂–∏ | ‚úÖ | `trade_engine.py:406-431` - `_check_balance()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç USDT |
| –í—Ö–æ–¥ —á–∞—Å—Ç—è–º–∏ (NumOrders) | ‚úÖ | `main.py:67,91` - `n_orders`, `part_volume = total_volume / n_orders` |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å retry | ‚úÖ | `trade_engine.py:230-318` - backoff 0.5s, 1s, 2s (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º!) |
| –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–≤–æ–π –Ω–æ–≥–∏ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ –≤—Ç–æ—Ä–æ–π | ‚úÖ | `trade_engine.py:895-922` - `_emergency_close_leg()` —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î |

### 2.7. –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É | ‚úÖ | `config.py:141` - `PRICE_UPDATE_INTERVAL = 1.0`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `main.py:477,566` |
| –†–∞—Å—á—ë—Ç –Ω–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ PnL | ‚úÖ | `main.py:1014-1016` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á—ë—Ç pnl_long + pnl_short |
| –í—ã—Ö–æ–¥ –ø–æ —Ü–µ–ª–µ–≤–æ–º—É —Å–ø—Ä–µ–¥—É | ‚úÖ | `main.py:1029` - `is_tp = net_spread <= state.exit_spread` |
| Stop Loss | ‚úÖ | `main.py:1019` - `is_sl = state.stop_loss > 0 and total_pnl <= -state.stop_loss` |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ | ‚ùå | **BUG:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ! –ù–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ –æ—Ç –±–∏—Ä–∂ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ |

### 2.8. –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã—Ö–æ–¥–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –í—ã—Ö–æ–¥ —á–∞—Å—Ç—è–º–∏ | ‚úÖ | `main.py:1093-1149` - `handle_state_exiting()` –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ `part_volume` |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ Net_spread <= ExitSpread | ‚úÖ | `main.py:1130` - `if net_spread > state.exit_spread: return` |
| reduceOnly –æ—Ä–¥–µ—Ä–∞ | ‚úÖ | `trade_engine.py:1024,1033` - `reduceOnly: True` –¥–ª—è exit |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ realized PnL | ‚úÖ | `main.py:1047` - `db.update_pair_pnl()` –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è |

### 2.9. –ü–ª–∞–≤–∞—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤—Ö–æ–¥/–≤—ã—Ö–æ–¥ | ‚úÖ | `main.py:816-949` - `handle_state_entering()` –∏ `handle_state_exiting()` |
| –î–æ–±–æ—Ä –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ —Å–ø—Ä–µ–¥–∞ | ‚úÖ | `main.py:856-873` - –¥–æ–±–æ—Ä –µ—Å–ª–∏ `net_spread >= entry_spread`, –∏–Ω–∞—á–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ |
| –ü–æ–∑–∏—Ü–∏—è –≤—Å–µ–≥–¥–∞ –∑–∞—Ö–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∞ | ‚úÖ | `trade_engine.py:818-879` - –ø—Ä–æ–≤–µ—Ä–∫–∞ imbalance –∏ emergency close –ø—Ä–∏ –¥–∏—Å–±–∞–ª–∞–Ω—Å–µ |

### 2.10. WebSocket Reconnect

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| Backoff (2, 4, 8, 16, 32 —Å–µ–∫) | ‚ùå | **BUG:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 3, 4.5, 6.75... —Å–µ–∫ (—Å–º. –ø.2.1). `ws_manager.py:69-71` |
| PAUSED –¥–ª—è –ø–∞—Ä –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | ‚ùå | **BUG:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ! `is_healthy()` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `main.py` |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –±–µ–∑ WS | ‚ùå | **BUG:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ! –û–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ WS-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è |
| –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ reconnect | ‚úÖ | `ws_manager.py:441-444` - —Ü–∏–∫–ª –ø–æ `self.subscriptions[ex]` –ø–æ—Å–ª–µ reconnect |

### 2.11. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –ë–î | ‚úÖ | `main.py:473` - `db.get_active_pairs()` |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ REST | ‚ùå | **BUG:** –ü–æ–∑–∏—Ü–∏–∏ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π SQLite –ë–î, –Ω–µ –∏–∑ REST API –±–∏—Ä–∂! `main.py:424` |
| –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ | ‚ùå | **CRITICAL:** –ü–æ–∑–∏—Ü–∏–∏ –í–û–°–°–¢–ê–ù–ê–í–õ–ò–í–ê–Æ–¢–°–Ø, –∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è! `main.py:420-467` –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º! |
| –ü–µ—Ä–µ–≤–æ–¥ –ø–∞—Ä –≤ PAUSED | ‚ùå | **BUG:** –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø–∞—Ä—ã –Ω–µ –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –≤ PAUSED, –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å |

---

## 3. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| Tick ‚Üí —Ä–µ—à–µ–Ω–∏–µ ‚â§ 1 ms | ‚ö†Ô∏è | –ú–µ—Ç—Ä–∏–∫–∏ –µ—Å—Ç—å (`market_engine.py:62`), –Ω–æ –Ω–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ä–æ–≥–∞. –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –∫–æ–ª-–≤–∞ –±–∏—Ä–∂ |
| –†–∞—Å—á—ë—Ç —Å–ø—Ä–µ–¥–∞ << 1 ms | ‚úÖ | –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ `check_spread()` ‚Äî –ø–æ—Ä—è–¥–∫–∞ –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥. –û—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è ‚Äî –¥–æ—Å—Ç—É–ø –∫ —Å—Ç–∞–∫–∞–Ω–∞–º |
| –†–∞–±–æ—Ç–∞ 24/7 | ‚úÖ | Graceful shutdown `main.py:295-373`, async –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, reconnect WS |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect WS | ‚ö†Ô∏è | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `ws_manager.py:421-501`, –Ω–æ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ backoff (—Å–º. –ø.2.1) |
| –ü–µ—Ä–µ–≤–æ–¥ –≤ ERROR –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö | ‚úÖ | `STATE_ERROR` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `main.py:666, 839, 978, 993, 1112` |

---

## –°–≤–æ–¥–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (—Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
1. **Orderbook 5 —É—Ä–æ–≤–Ω–µ–π –≤–º–µ—Å—Ç–æ 10** ‚Äî –Ω–µ—Ç–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç VWAP –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤
2. **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏** ‚Äî –ø—Ä–∏ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ –æ–¥–Ω–æ–π –Ω–æ–≥–∏ –≤—Ç–æ—Ä–∞—è –æ—Å—Ç–∞—ë—Ç—Å—è "–≥–æ–ª–æ–π"
3. **–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø–æ–∑–∏—Ü–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è, –∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è** ‚Äî –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º!
4. **–ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∂–∏–º–∞ one-way** ‚Äî –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –Ω–∞ –±–∏—Ä–∂–∞—Ö —Å hedge mode
5. **–ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ WS** ‚Äî —Ç–æ—Ä–≥–æ–≤–ª—è –±–µ–∑ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
6. **–ù–µ—Ç PAUSED –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ WS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** ‚Äî –ø–∞—Ä—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö

### üü° –°—Ä–µ–¥–Ω–∏–µ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å):
1. **Backoff –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã WS** ‚Äî 3, 4.5, 6.75... –≤–º–µ—Å—Ç–æ 2, 4, 8, 16, 32
2. **–ù–∞–∑–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤** ‚Äî paused/active/HOLD –≤–º–µ—Å—Ç–æ PAUSED/READY/POSITION_OPEN
3. **–ù–µ—Ç REST –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∑–∏—Ü–∏–π** ‚Äî —á–∏—Ç–∞–µ–º –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î, –∞ –Ω–µ —Å –±–∏—Ä–∂

### üü¢ –ù–∏–∑–∫–∏–µ (–∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–µ):
1. **MEXC –¥–æ–±–∞–≤–ª–µ–Ω** ‚Äî –Ω–µ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö v1, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

---

## –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –î–∞—Ç–∞ | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ß—Ç–æ –±—ã–ª–æ | –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
|------|------------|----------|----------------|
| | | | |
