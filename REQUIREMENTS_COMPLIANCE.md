# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ/–Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## –£—Å–ª–æ–≤–Ω—ã–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç
- ‚ùå –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç
- ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç
- üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## 1. –¶–µ–ª—å

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å Tick ‚Üí —Ä–µ—à–µ–Ω–∏–µ ‚âà –¥–æ 1 ms | ‚è≥ | –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ trade_engine |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ 30 –ø–∞—Ä –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ | ‚úÖ | `config.py:96` - `MAX_MONITORED_PAIRS = 30` |
| –ê—Ä–±–∏—Ç—Ä–∞–∂ 2 –±–∏—Ä–∂–∏ –Ω–∞ –æ–¥–Ω—É –ø–∞—Ä—É | ‚úÖ | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ `market_engine.py` |
| –†–µ–∂–∏–º –ø–æ–∑–∏—Ü–∏–π one-way | ‚è≥ | –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ exchange_manager |

---

## 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 2.1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –¢–æ–ª—å–∫–æ WebSocket (–±–µ–∑ REST polling) | ‚úÖ | `ws_manager.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ WebSocket –¥–ª—è —Ü–µ–Ω |
| Best bid / best ask | ‚úÖ | –•—Ä–∞–Ω—è—Ç—Å—è –≤ —Å—Ç–∞–∫–∞–Ω–∞—Ö `bids[0]` / `asks[0]` |
| Orderbook –¥–æ 10 —É—Ä–æ–≤–Ω–µ–π | ‚ùå | **BUG:** `ws_manager.py:74` - `RETURN_BOOK_DEPTH = 5`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ 5 —É—Ä–æ–≤–Ω–µ–π –≤–º–µ—Å—Ç–æ 10! |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞: Bybit, Bitget, BingX, Gate.io, OKX, HTX | ‚ö†Ô∏è | –í—Å–µ 6 –±–∏—Ä–∂ –µ—Å—Ç—å + MEXC (–Ω–µ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö). `config.py:14-22` |
| –û–¥–Ω–æ –ø—É–±–ª–∏—á–Ω–æ–µ WS-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ –±–∏—Ä–∂—É | ‚úÖ | `ws_manager.py:180` - –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ –±–∏—Ä–∂—É |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect —Å backoff | ‚ö†Ô∏è | **BUG:** Backoff –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3, 4.5, 6.75... —Å–µ–∫ (base=3, mult=1.5), –∞ –Ω–µ 2, 4, 8, 16, 32 –∫–∞–∫ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö. `ws_manager.py:69-71` |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö | ‚úÖ | `safe_levels()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç qty > 0, price, —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö |

### 2.2. –¢–∏–ø—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –¢–æ–ª—å–∫–æ USDT-–ø–µ—Ä–ø–µ—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—å—é—á–µ—Ä—Å—ã | | |
| –†–∞—Å—á—ë—Ç—ã –≤ USDT | | |

### 2.3. –†–∞—Å—á—ë—Ç —Å–ø—Ä–µ–¥–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø–æ 10 —É—Ä–æ–≤–Ω—è–º asks/bids | | |
| –ó–∞–ø—Ä–µ—Ç –≤—Ö–æ–¥–∞ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –æ–±—ä—ë–º–∞ | | |
| –£—á—ë—Ç –∫–æ–º–∏—Å—Å–∏–π (4x taker fee) | | |
| Net_spread = Spread - Total_fees | | |

### 2.4. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞—Ä—ã

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| PairConfig —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | | |
| –°—Ç–∞—Ç—É—Å—ã: PAUSED, READY, ENTERING, POSITION_OPEN, EXITING, ERROR | | |

### 2.5. –û—Ä–¥–µ—Ä–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –¢–æ–ª—å–∫–æ market –æ—Ä–¥–µ—Ä–∞ | | |
| reduceOnly –¥–ª—è –≤—ã—Ö–æ–¥–∞ | | |

### 2.6. –ê–ª–≥–æ—Ä–∏—Ç–º –≤—Ö–æ–¥–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –ü—Ä–æ–≤–µ—Ä–∫–∞ Net_spread >= EntrySpread | | |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ | | |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞/–º–∞—Ä–∂–∏ | | |
| –í—Ö–æ–¥ —á–∞—Å—Ç—è–º–∏ (NumOrders) | | |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å retry | | |
| –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–≤–æ–π –Ω–æ–≥–∏ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ –≤—Ç–æ—Ä–æ–π | | |

### 2.7. –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É | | |
| –†–∞—Å—á—ë—Ç –Ω–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ PnL | | |
| –í—ã—Ö–æ–¥ –ø–æ —Ü–µ–ª–µ–≤–æ–º—É —Å–ø—Ä–µ–¥—É | | |
| Stop Loss | | |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ | | |

### 2.8. –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã—Ö–æ–¥–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –í—ã—Ö–æ–¥ —á–∞—Å—Ç—è–º–∏ | | |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ Net_spread <= ExitSpread | | |
| reduceOnly –æ—Ä–¥–µ—Ä–∞ | | |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ realized PnL | | |

### 2.9. –ü–ª–∞–≤–∞—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤—Ö–æ–¥/–≤—ã—Ö–æ–¥ | | |
| –î–æ–±–æ—Ä –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ —Å–ø—Ä–µ–¥–∞ | | |
| –ü–æ–∑–∏—Ü–∏—è –≤—Å–µ–≥–¥–∞ –∑–∞—Ö–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∞ | | |

### 2.10. WebSocket Reconnect

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| Backoff (2, 4, 8, 16, 32 —Å–µ–∫) | | |
| PAUSED –¥–ª—è –ø–∞—Ä –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | | |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –±–µ–∑ WS | | |
| –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ reconnect | | |

### 2.11. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –ë–î | | |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ REST | | |
| –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ | | |
| –ü–µ—Ä–µ–≤–æ–¥ –ø–∞—Ä –≤ PAUSED | | |

---

## 3. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| Tick ‚Üí —Ä–µ—à–µ–Ω–∏–µ ‚â§ 1 ms | | |
| –†–∞—Å—á—ë—Ç —Å–ø—Ä–µ–¥–∞ << 1 ms | | |
| –†–∞–±–æ—Ç–∞ 24/7 | | |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect WS | | |
| –ü–µ—Ä–µ–≤–æ–¥ –≤ ERROR –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö | | |

---

## –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –î–∞—Ç–∞ | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ß—Ç–æ –±—ã–ª–æ | –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
|------|------------|----------|----------------|
| | | | |
